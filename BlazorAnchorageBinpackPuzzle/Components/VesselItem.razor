@using BlazorAnchorageBinpackPuzzle.Models

<div class="vessel-item @(IsRotated ? "rotated" : "")"
     draggable="true"
     data-ship-designation="@VesselType.ShipDesignation"
     data-vessel-index="@VesselIndex"
     data-is-rotated="@IsRotated"
     @ondblclick="HandleDoubleClick"
     title="Drag to place. Double-click to rotate.">
    <div class="vessel-content">
        <div class="vessel-label">@VesselType.ShipDesignation</div>
        <div class="vessel-dims">@DisplayDimensions.Width &times; @DisplayDimensions.Height</div>
    </div>
</div>

@code {
    [Parameter]
    public required VesselType VesselType { get; set; }

    [Parameter]
    public required int VesselIndex { get; set; }

    [Parameter]
    public required EventCallback<(int Index, bool IsRotated)> OnRotate { get; set; }

    [Parameter]
    public bool IsRotated { get; set; }

    private VesselDimensions DisplayDimensions => IsRotated
        ? VesselType.SingleShipDimensions.Rotate()
        : VesselType.SingleShipDimensions;

    private async Task HandleDoubleClick()
    {
        await OnRotate.InvokeAsync((VesselIndex, !IsRotated));
    }
}
